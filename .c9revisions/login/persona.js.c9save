{"ts":1375956042912,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":true,"ts":1375967678194,"patch":[[{"diffs":[[1,"var currentUser = '';\n\nfunction loginbutton() {\n    $(\"#logout\").html(\"LOGIN\");\n    $(\"#logout\").attr(\"id\", \"login\");   \n}\n\nfunction logoutbutton() {\n    $(\"#login\").html(\"LOGOUT\");\n    $(\"#login\").attr(\"id\", \"logout\");\n}\n\n\nnavigator.id.watch({\n  loggedInUser: currentUser,\n  onlogin: function(assertion) {\n    console.log(assertion);\n    \n    $.ajax({ \n        type: 'POST',\n        url: 'login/persona.php', \n        data: {assertion: assertion},\n        success: function(res, status, xhr) {\n            logoutbutton();\n            var email = res;\n            var username = email.split(\"@\");\n            $(document).ready(function() {                   \n                $(\"#user\").html(username[0] + \"<br />\" + username[1]);\n                gravatar(email);\n            });      \n        },\n        error: function(xhr, status, err) {\n            navigator.id.logout();\n            alert(\"Login failure: \" + err);\n        }\n    });d\n    \n    \n    \n },\n  onlogout: function() {\n\n\n  }\n});\n\n$(\"document\").ready(function() {\n    \n    $(\"#login\").click(function() {\n        navigator.id.request();        \n    });\n    \n    $(\"#logout\").click(function() {\n        navigator.id.logout();        \n    });\n    \n});\n\n\n"]],"start1":0,"start2":0,"length1":0,"length2":1213}]],"length":1213,"saved":false}
